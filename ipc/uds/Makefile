#------------------------------------------------------------------------------
# @file
#
# Unix Domain Socket Sample
#
# Copyright (c) 2013 RoyLee, All rights reserved.
#
#------------------------------------------------------------------------------

#DEBUG = 1

#------------------------------------------------------------------------------
# Define target
#------------------------------------------------------------------------------
TARGET		:=uds

#------------------------------------------------------------------------------
# Define objects & sources
#------------------------------------------------------------------------------
OBJS		:= \
    src/main.o \
    src/server.o \
    src/client.o

#------------------------------------------------------------------------------
# Define programs
#------------------------------------------------------------------------------
CC		    :=$(CROSS_COMPILE)gcc
LD		    :=$(CROSS_COMPILE)gcc

#------------------------------------------------------------------------------
# Define directories
#------------------------------------------------------------------------------
LIBDIR		:=#-L[library path]
INCDIR		:=#-I[include path]
INSTALLDIR	:=#[install path]

#------------------------------------------------------------------------------
# Define default flags
#------------------------------------------------------------------------------
CFLAGS		:=$(INCDIR)
CFLAGS		+=-Wall
CFLAGS		+=-D_FILE_OFFSET_BITS=64
CFLAGS		+=$(MOD_CFLAGS)

LFLAGS		:=$(LIBDIR)
LFLAGS		+=-lpthread
LFLAGS		+=$(MOD_LFLAGS)

#------------------------------------------------------------------------------
# Define option flags
#------------------------------------------------------------------------------
ifdef	DEBUG 
CFLAGS		+=$(DBG_CFLAGS)
LFLAGS		+=$(DBG_LFLAGS)
else
CFLAGS		+=-O2
endif

#------------------------------------------------------------------------------
# Define rules
#------------------------------------------------------------------------------
.PHONY: clean

all:		$(TARGET)

$(TARGET):      $(OBJS)
	$(CC) -o $@ $^ $(LFLAGS)

install:
	cp -a $(TARGET) $(INSTALLDIR)

clean:
	@rm -f $(TARGET) *~ src/*~ src/*.o tags
